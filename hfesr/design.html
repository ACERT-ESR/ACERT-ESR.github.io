<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Coding &mdash; 95 GHz ESR Software 0.9 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="95 GHz ESR Software 0.9 documentation" href="index.html" />
    <link rel="next" title="Software Environment" href="environment.html" />
    <link rel="prev" title="Define a Pulse Frame" href="pulseframe.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="environment.html" title="Software Environment"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pulseframe.html" title="Define a Pulse Frame"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">95 GHz ESR Software 0.9 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="coding">
<h1>Coding<a class="headerlink" href="#coding" title="Permalink to this headline">¶</a></h1>
<div class="section" id="design">
<h2>Design<a class="headerlink" href="#design" title="Permalink to this headline">¶</a></h2>
<p>The central object of this code is the class
<code class="xref py py-class docutils literal"><span class="pre">Spectrometer.Spectrometer</span></code> which is responsible
for aggregating cards in the machine for experiments.
Predefined experiments are all in <a class="reference internal" href="generated/Experiments.html#module-Experiments" title="Experiments"><code class="xref py py-mod docutils literal"><span class="pre">Experiments</span></code></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Previously, these used definitions in <code class="xref py py-mod docutils literal"><span class="pre">DQC</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">DQCPhaseCycling</span></code>, and <a class="reference internal" href="analysis.html#module-PhaseCycling" title="PhaseCycling"><code class="xref py py-mod docutils literal"><span class="pre">PhaseCycling</span></code></a> to define some of the experiments,
but this older formatting should now be obsolete.</p>
</div>
<p>Data analysis uses <code class="xref py py-mod docutils literal"><span class="pre">plot</span></code> and <code class="xref py py-mod docutils literal"><span class="pre">util</span></code>. The utilities
also describe how to read configuration files and configure logging
facilities for debugging.</p>
<p>Most of the acqisition cards
are defined in <code class="xref py py-mod docutils literal"><span class="pre">Devices</span></code>, but two signal generators are not.</p>
<dl class="docutils">
<dt>SpinCore PulseBlaster</dt>
<dd>This signal generator uses the modules <code class="xref py py-mod docutils literal"><span class="pre">PBTiming</span></code> for most of its
work, but the modules <code class="xref py py-mod docutils literal"><span class="pre">PulseBlaster</span></code> helps to hook the older
<code class="xref py py-mod docutils literal"><span class="pre">PBTiming</span></code> code into the Spectrometer.</dd>
<dt>Chase DWG11000</dt>
<dd>This signal generator&#8217;s main class is <code class="xref py py-class docutils literal"><span class="pre">ChaseGenerator.ChaseCard</span></code>.
<code class="xref py py-mod docutils literal"><span class="pre">ChasePulseProgram</span></code> is responsible for turning pulses into
a signal you can start and stop. It uses the <code class="xref py py-mod docutils literal"><span class="pre">PulseFrame</span></code>
module to turn pulses into a pulse frame. <cite>PulseFrame</cite>, in turn,
uses the <code class="xref py py-mod docutils literal"><span class="pre">Timing</span></code> module to turn constraints into a schedule
of signals to send.</dd>
</dl>
<p>There are several <em>mock</em> classes. These are used for testing the code
on machines where some, or all, of the devices are not available.</p>
<p>The file <cite>Version.py</cite> is written automatically during installation.
It enables the function <cite>acert.hfesr.version()</cite> which retrieves
the Subversion URL and version number.</p>
</div>
<div class="section" id="logging-and-printing">
<h2>Logging and Printing<a class="headerlink" href="#logging-and-printing" title="Permalink to this headline">¶</a></h2>
<p>There are two ways to print messages. util.msg() sends messages
that will always to go the user. This is prefered to the print
statement because it can be redirected for batch operations
or execution under a GUI.</p>
<p>In addition, each module has a logger from the standard Python
logging facility. For instance, the Timing module defines:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;acert.hfesr.Timing&#39;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;A message from the Timing module&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Each module has its own logger, but the logging facility treats
them hierarchically. If code adds a handler to the
<code class="docutils literal"><span class="pre">acert.hfesr</span></code> logger, then that handler will listen to all events
under acert.hfesr. The logging facility provides handlers
to print to the screen or save to files.</p>
<p>The acert.hfesr.util.setup_logging function lets you choose
what level of logging you want to see. logging.INFO is the standard
setting, and logging.DEBUG will show lots of messages.</p>
<p>The acert.hfesr.util.trace_module function lets you choose to
trace a specific module. It saves those traces to hfesrtrace.txt
in the working directory.</p>
<p>If you are working interactively at the command line
and want to turn on logging, try:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">logging</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
</pre></div>
</div>
<p>to turn on logging to the terminal for all messages.</p>
</div>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>The code is documented with Python&#8217;s <code class="xref py py-mod docutils literal"><span class="pre">sphinx</span></code> module.
Sphinx is configured to use the autodoc extension, which can
pull comments from the code. This feature is used in the
documentation where it does not conflict with the flow of
the documentation.</p>
<p>Sphinx is also configured to use a math extension so that
it can include math in its output:</p>
<div class="highlight-python"><div class="highlight"><pre>The length of the phase cycle is :math:`m^n`.
</pre></div>
</div>
<p>All math is written in <span class="math">\(\LaTeX\)</span>.</p>
<p>When embedding math documentation in code, be sure to
use <code class="docutils literal"><span class="pre">r</span></code> to get non-escaping quotes, <code class="docutils literal"><span class="pre">r&quot;like</span> <span class="pre">this&quot;</span></code>.
Otherwise you need to double all explicit backslashes.</p>
<p>If you neglect to escape the backslash, you can, <em>e.g.</em>, get errors
from Sphinx that the block is indented improperly because <code class="docutils literal"><span class="pre">\r</span></code> is a
carriage return.</p>
<p>To build the documentation as a web-page:</p>
<ol class="arabic simple">
<li>cd docs</li>
<li>make html</li>
</ol>
<p>To build the documentation PDF:</p>
<ol class="arabic simple">
<li>cd docs</li>
<li>make latex</li>
<li>(cd _build/latex &amp;&amp; make all-pdf)</li>
</ol>
</div>
<div class="section" id="versioning">
<h2>Versioning<a class="headerlink" href="#versioning" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">No idea if the following feature is still used.  Ultimately, we will want to transition exclusively to git and use version tags.</p>
</div>
<p>It might help to record the version of the code when you record data.
There is a function in the acert.hfesr module to tell you what
version of the code you are using.</p>
<dl class="function">
<dt id="acert.hfesr.version">
<code class="descclassname">acert.hfesr.</code><code class="descname">version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#acert.hfesr.version" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(SVN directory of hfesr code, version number as a string)</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>This function depends on Subversion properties set on the __init__.py
file in the root hfesr directory and on the setup.py script creating
a module called hfesr/Version.py.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Coding</a><ul>
<li><a class="reference internal" href="#design">Design</a></li>
<li><a class="reference internal" href="#logging-and-printing">Logging and Printing</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#versioning">Versioning</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pulseframe.html"
                        title="previous chapter">Define a Pulse Frame</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="environment.html"
                        title="next chapter">Software Environment</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/design.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="environment.html" title="Software Environment"
             >next</a> |</li>
        <li class="right" >
          <a href="pulseframe.html" title="Define a Pulse Frame"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">95 GHz ESR Software 0.9 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, John Franck, Drew Dolgert, Curt Dunnam.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
  </body>
</html>
